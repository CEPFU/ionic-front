{"version":3,"sources":["coffee/app.coffee","coffee/controllers.coffee","coffee/directives.coffee","coffee/services.coffee"],"names":[],"mappings":"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","file":"application.js","sourcesContent":["# Ionic Starter App\nangular.module('starter', [\n  'ionic'\n  'starter.controllers'\n  'starter.directives'\n  'starter.services'\n  'ionic.service.core'\n  'ionic.service.push'\n])\n\n.filter 'titleCase', ->\n  (input) ->\n    words = input.split(' ')\n    i = 0\n    while i < words.length\n      words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1)\n      i++\n    words.join ' '\n\n\n.factory '$localStorage', ['$window', ($window) ->\n  return {\n    set: (key, value) ->\n      $window.localStorage[key] = value\n    get: (key, defaultValue) ->\n      $window.localStorage[key] || defaultValue\n    setObject: (key, value) ->\n      $window.localStorage[key] = JSON.stringify value\n    getObject: (key) ->\n      value = $window.localStorage[key]\n      if not value? or value in ['undefined', 'null']\n        undefined\n      else\n        JSON.parse value\n}]\n\n.run(($ionicPlatform, $ionicUser, $rootScope, $http) ->\n  $ionicPlatform.ready ->\n\n    # Hide the accessory bar by default\n    # (remove this to show the accessory bar above the keyboard for form inputs)\n    if window.cordova and window.cordova.plugins.Keyboard\n      cordova.plugins.Keyboard.hideKeyboardAccessoryBar true\n\n    # org.apache.cordova.statusbar required\n    StatusBar.styleDefault() if window.StatusBar\n\n    Ionic.io()\n    push = new Ionic.Push(\n      'debug': true\n      'onNotification': (notification) ->\n        payload = notification['_raw'].text\n        alert payload\n        return\n      'onRegister': (data) ->\n        console.log 'Device token (X):', data.token\n        # alert data.token\n        user = $ionicUser.get()\n        if not user.user_id\n          user.user_id = $ionicUser.generateGUID()\n        try\n          push.addTokenToUser $ionicUser\n        catch error\n          console.log 'Error while adding token to user:', error\n        console.log 'User:', user\n        return\n    )\n\n    window.push = push\n\n    try\n      push.register()\n    catch error\n      console.log 'Error while registering for push:', error\n\n    $rootScope.$on '$cordovaPush:tokenReceived', (event, data) ->\n      console.log 'Got token', data.token, data.platform\n      # Do something with the token\n      return\n)\n\n.config ($stateProvider, $urlRouterProvider) ->\n  $stateProvider\n    .state 'app',\n      url: '/app'\n      abstract: true\n      templateUrl: 'templates/menu.html'\n      controller: 'AppCtrl'\n\n    .state 'app.profiles',\n      url: '/profiles'\n      views:\n        menuContent:\n          templateUrl: 'templates/profiles.html'\n          controller: 'ProfilesCtrl'\n\n    .state 'app.profile',\n      url: '/profiles/:profileId'\n      views:\n        menuContent:\n          templateUrl: 'templates/profile.html'\n          controller: 'SingleProfileCtrl'\n\n    .state 'app.selectLocation',\n      url: '/location',\n      views:\n        menuContent:\n          templateUrl: 'templates/location.html'\n          controller: 'LocationCtrl'\n\n  # if none of the above states are matched, use this as the fallback\n  $urlRouterProvider.otherwise '/app/profiles'\n","angular.module('starter.controllers', ['angular.filter', 'starter.services'])\n\n.controller 'AppCtrl', ($rootScope, $http) ->\n  $http.get('json/config.json').success (data) ->\n    $rootScope.config = data\n\n  $rootScope.asList = (object) ->\n    res = []\n    for name, prop of object\n      res.push(prop)\n    res\n\n  null\n\n.controller 'ProfilesCtrl', ($scope, ProfileService, $state) ->\n  $scope.profiles = ProfileService.getProfiles()\n  @newProfile = () ->\n    np = ProfileService.newProfile()\n    $scope.profiles = ProfileService.getProfiles()\n    $state.go 'app.profile', {profileId: np.id}\n\n  null\n\n.controller 'SingleProfileCtrl', ($rootScope, $scope, $stateParams,\n    ProfileService, LocationService, RestService, filterFilter) ->\n  $scope.profile = ProfileService.getProfile $stateParams.profileId\n  LocationService.currentLocation = $scope.profile.location\n\n  $scope.locationDescription = () ->\n    if $scope.profile?.location?\n      \"(#{$scope.profile.location.latlng.lat},\n        #{$scope.profile.location.latlng.lng})\"\n    else\n      null\n\n  # When we come back from the location page\n  $scope.$watch (() -> ProfileService.currentLocation), (newLocation) ->\n    if newLocation?\n      ProfileService.currentLocation = undefined\n      LocationService.currentLocation = newLocation\n      $scope.profile.location = newLocation\n\n  # On exit: Persist changes to profile\n  $scope.$on '$destroy', ($destroy) ->\n    ProfileService.putProfile $scope.profile\n    ProfileService.persist()\n    LocationService.location = undefined\n\n    RestService.sendProfile $scope.profile\n\n  $scope.addProperty = () ->\n    if not $scope.profile.properties?\n      $scope.profile.properties = []\n    $scope.profile.properties.push {}\n\n  $scope.getClasses = (input) ->\n    switch input.type\n      when 'select'\n        'item-select'\n      when 'range'\n        'range range-positive'\n\n  null\n\n\n.controller 'LocationCtrl',\n  ($scope, MapService, LocationService, ProfileService, $ionicHistory) ->\n    $scope.noLocation = true\n    $scope.locateMe = () -> MapService.locate()\n\n    @setLocation = (location) =>\n      @location = location\n      $scope.noLocation = not @location?\n\n    MapService.init 'map'\n    MapService.registerListener (location) =>\n      @setLocation MapService.simpleLocation location\n      $scope.$apply () -> $scope.noLocation = not @location?\n\n    if LocationService.currentLocation?\n      @setLocation LocationService.currentLocation\n      MapService.setView @location\n      MapService.addPin @location, \"Selected location\"\n    else\n      MapService.locate (loc) -> \"You are here.\"\n\n    $scope.selectLocation = () =>\n      if @location?\n        console.log 'Setting location:', @location\n        ProfileService.currentLocation = @location\n        $ionicHistory.goBack()\n      else\n        console.log 'Error: no location found'\n\n    null\n","angular.module 'starter.directives', []\n\n.directive 'profileInput', () ->\n  restrict: 'E'\n  scope:\n    input: '='\n    profile: '='\n    property: '='\n  link: (scope, element, attrs) ->\n    scope.getContentUrl = () ->\n      \"templates/inputs/#{scope.input.type}.html\"\n  template: '<div ng-include=\"getContentUrl()\"></div>'\n  controllerAs: 'inputCtrl'\n  controller: ($rootScope, $scope) ->\n    $scope.asList = $rootScope.asList\n","angular.module 'starter.services', ['ionic.service.core']\n\n.service 'MapService', () ->\n  @map = null\n  @listeners = []\n\n  @init = (cssId) =>\n    @map = L.map cssId\n\n    L.tileLayer(\"https://api.tiles.mapbox.com/v4/{id}\\\n      /{z}/{x}/{y}.png?access_token={accessToken}\", {\n      attribution: \"\"\"Map data &copy;\n        <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors,\n        <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>,\n        Imagery © <a href=\"http://mapbox.com\">Mapbox</a>\"\"\"\n      maxZoom: 18\n      id: 'coolbox4life.dfc12b44'\n      accessToken: \"pk.eyJ1IjoiY29vbGJveDRsaWZlIiwiYSI6ImY2Zjk2YmQ1ZjMyYWM2ZDZk\\\n      YjI2OWIzY2U3YzMwY2NhIn0.WGZ5HU-CIlNshi1UVm4z-g\"\n    })\n    .addTo @map\n\n    @map.on 'locationfound', @applyListeners\n\n  @applyListeners = (location) =>\n    for listener in @listeners\n      listener(location)\n\n  @registerListener = (listener) ->\n    @listeners.push(listener)\n\n  @popListener = (idx = -1) ->\n    @listeners.splice(idx, 1)\n\n  # Copies the relevant properties from the leaflet location\n  @simpleLocation = (location) ->\n    propertiesToCopy = [\n      'accuracy', 'bounds', 'latlng', 'timestamp'\n    ]\n\n    simple = {}\n    for prop in propertiesToCopy\n      simple[prop] = location[prop]\n\n    simple\n\n  @setView = (location) ->\n    zoom = if location.accuracy? then Math.round(location.accuracy / 2) else 16\n    @map.setView location.latlng, zoom\n\n  # Adds a pin at the specified location and adds an optional popup\n  @addPin = (location, popup) =>\n    marker = L.marker location.latlng\n    .addTo @map\n\n    if popup?\n      marker.bindPopup popup\n      .openPopup()\n\n  @locate = (popup, circle = false, options = {setView: true, maxZoom: 16}) ->\n    @registerListener (location) =>\n      radius = location.accuracy / 2\n\n      popupText = if popup? then popup(location) else null\n      @addPin location, popupText\n\n      if circle\n        L.circle location.latlng, radius\n          .addTo @map\n\n      @popListener()\n\n    @map.locate options\n\n  null\n\n.service 'ProfileService', ($localStorage) ->\n  @newLocation = undefined\n\n  @persist = (profileData) ->\n    if not profileData?\n      profileData = @profileData\n    console.log 'Persisting:', JSON.stringify profileData\n    $localStorage.setObject 'profiles', profileData\n\n  @getProfiles = () -> @profileData.profiles\n  @getProfile = (id) -> @profileData.profiles[id]\n  @putProfile = (id, profile) -> @profileData.profiles[id] = profile\n  @putProfile = (profile) -> @profileData.profiles[profile.id] = profile\n  @newProfile = () ->\n    @profileData.lastId += 1\n    newProfile = {\n      id: @profileData.lastId ? 0\n    }\n    @putProfile newProfile\n    newProfile\n\n  @profileData = $localStorage.getObject 'profiles'\n  if not @profileData?\n    @profileData =\n      lastId: 0\n      profiles: {}\n    @persist @profileData\n\n  null\n\n.service 'LocationService', () ->\n  @currentLocation = undefined\n  null\n\n.service 'RestService', ($rootScope, $ionicUser, $http, filterFilter) ->\n\n  @endpointUrl = $rootScope.config.api.mainUrl\n  @getApiUrl = (target) ->\n    @endpointUrl + $rootScope.config.api.endpoints[target].url\n\n  @getUser = () ->\n    user = $ionicUser.get()\n    if not user.user_id\n      user.user_id = $ionicUser.generateGUID()\n    user\n\n  # Copies the specified properties into a new object (shallow?)\n  @selectiveCopy = (obj, properties) ->\n    newObj = {}\n    for prop in properties\n      newObj[prop] = obj[prop]\n    newObj\n\n  @findJavaClass = (inputConfig, inputValue) ->\n    if inputConfig.javaClass?\n      inputConfig.javaClass\n    else\n      if inputConfig.options?\n        inputConfig.options[inputValue.value]?.javaClass\n\n  @getValue = (config, input) ->\n    value = input.value\n    if config.valueType?\n      switch config.valueType\n        when 'int'\n          value = parseInt value\n        when 'float'\n          value = parseFloat value\n    value\n\n  @transformProfile = (profile) ->\n    newProfile = @selectiveCopy profile, ['name', 'location', 'id']\n    newProfile.rule = {\n      '@class': 'JSONAnd'\n      ofOperands: []\n    }\n\n    for prop in profile.properties?\n      config = $rootScope.config.profile.properties[prop.name]\n\n      operand = {\n        '@class': 'JSONMatchToStation'\n        toStation: newProfile.location # TODO: Find new format?!\n      }\n\n      console.log 'Prop:', prop\n      console.log 'Config:', config\n\n      switch config.javaStructure.type\n        when 'attributeToObject'\n          classFrom = config.javaStructure.classFrom\n          valueFrom = config.javaStructure.valueFrom\n          javaClass = @findJavaClass config.inputs[classFrom],\n            prop.inputs[classFrom]\n          value = @getValue config.inputs[valueFrom], prop.inputs[valueFrom]\n          operand.matchOperator = {\n            '@class': javaClass\n            attribute: prop.name\n            toObject: value\n          }\n\n      newProfile.rule.ofOperands.push operand\n\n    newProfile\n\n  @sendProfile = (profile) ->\n    console.log 'Sending profile to backend:', profile\n    url = @getApiUrl 'profile'\n\n    payload = {\n      profile: @transformProfile profile\n      user: @getUser()\n    }\n\n    console.log 'API URL:', url\n    console.log 'Payload:', payload\n    console.log 'JSON Payload:', JSON.stringify payload\n\n    null\n\n\n  null\n"],"sourceRoot":"/source/"}